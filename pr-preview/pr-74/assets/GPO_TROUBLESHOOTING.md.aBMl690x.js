import{_ as t,o as i,c as o,ag as a}from"./chunks/framework.DdFBPHIV.js";const u=JSON.parse('{"title":"GPO/Intune Troubleshooting Guide","description":"","frontmatter":{},"headers":[],"relativePath":"GPO_TROUBLESHOOTING.md","filePath":"GPO_TROUBLESHOOTING.md","lastUpdated":1772006158000}'),s={name:"GPO_TROUBLESHOOTING.md"};function l(n,e,r,d,c,h){return i(),o("div",null,[...e[0]||(e[0]=[a(`<h1 id="gpo-intune-troubleshooting-guide" tabindex="-1">GPO/Intune Troubleshooting Guide <a class="header-anchor" href="#gpo-intune-troubleshooting-guide" aria-label="Permalink to &quot;GPO/Intune Troubleshooting Guide&quot;">​</a></h1><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p><strong>Quick Help</strong>: If you see a list of failed policies (like <code>SignScripts_Enf</code>, <code>UpdateChannel_Enf</code>, etc. all with error -2016281112), read the <a href="./INTUNE_ERROR_FIX">detailed troubleshooting guide</a> first.</p></div><h2 id="error-code-2016281112-remediation-failed" tabindex="-1">Error Code -2016281112 (Remediation Failed) <a class="header-anchor" href="#error-code-2016281112-remediation-failed" aria-label="Permalink to &quot;Error Code -2016281112 (Remediation Failed)&quot;">​</a></h2><p>If you see error code <strong>-2016281112</strong> for your SwitchCraft policies in Intune, this means &quot;Remediation failed&quot; - the policy could not be applied to the device.</p><h3 id="common-causes" tabindex="-1">Common Causes <a class="header-anchor" href="#common-causes" aria-label="Permalink to &quot;Common Causes&quot;">​</a></h3><ol><li><p><strong>Incorrect Data Type</strong></p><ul><li><strong>Problem</strong>: Using &quot;Integer&quot; or &quot;Boolean&quot; instead of &quot;String&quot;</li><li><strong>Solution</strong>: All ADMX-backed policies MUST use <strong>String</strong> (or &quot;String (XML)&quot;) as the Data Type</li><li><strong>Example Error</strong>: <code>DebugMode_Enf Integer</code> - The &quot;Integer&quot; suffix indicates wrong data type</li></ul></li><li><p><strong>ADMX Not Installed</strong></p><ul><li><strong>Problem</strong>: The ADMX file was not ingested before configuring policies</li><li><strong>Solution</strong>: Ensure the ADMX ingestion policy shows &quot;Succeeded&quot; status: <ul><li>OMA-URI: <code>./Device/Vendor/MSFT/Policy/ConfigOperations/ADMXInstall/switchcraft/Policy/SwitchCraftPolicy</code></li><li>Data Type: <strong>String</strong></li><li>Value: Full content of <code>SwitchCraft.admx</code> file</li></ul></li></ul></li><li><p><strong>Incorrect OMA-URI Path</strong></p><ul><li><strong>Problem</strong>: Wrong path structure or typos in the OMA-URI</li><li><strong>Solution</strong>: Verify the exact path matches the documentation:</li><li>Base: <code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced</code></li><li>Category suffix: <code>~[Category]_Enf/[PolicyName]_Enf</code></li><li>Example: <code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~General_Enf/CompanyName_Enf</code></li></ul></li><li><p><strong>Malformed XML Value</strong></p><ul><li><strong>Problem</strong>: Invalid XML structure in the Value field</li><li><strong>Solution</strong>: Ensure the XML follows the correct format: <ul><li>For enabled/disabled policies: <code>&lt;enabled/&gt;</code> or <code>&lt;disabled/&gt;</code></li><li>For policies with data: <code>&lt;enabled/&gt;&lt;data id=&quot;[ElementId]&quot; value=&quot;[Value]&quot;/&gt;</code></li></ul></li><li><strong>Common Mistakes</strong>: <ul><li>Missing closing tags</li><li>Wrong element IDs (must match ADMX file)</li><li>Special characters not properly escaped</li></ul></li></ul></li><li><p><strong>Windows Version Compatibility</strong></p><ul><li><strong>Problem</strong>: Policy not supported on the target Windows version</li><li><strong>Solution</strong>: Ensure devices are running Windows 10/11 (policies require Windows 10+)</li></ul></li><li><p><strong>Registry Permissions</strong></p><ul><li><strong>Problem</strong>: Insufficient permissions to write to <code>HKCU\\Software\\Policies\\FaserF\\SwitchCraft</code></li><li><strong>Solution</strong>: Verify the user has write access to their own HKCU registry hive</li></ul></li></ol><h3 id="step-by-step-troubleshooting" tabindex="-1">Step-by-Step Troubleshooting <a class="header-anchor" href="#step-by-step-troubleshooting" aria-label="Permalink to &quot;Step-by-Step Troubleshooting&quot;">​</a></h3><h4 id="step-1-verify-admx-installation" tabindex="-1">Step 1: Verify ADMX Installation <a class="header-anchor" href="#step-1-verify-admx-installation" aria-label="Permalink to &quot;Step 1: Verify ADMX Installation&quot;">​</a></h4><p>Check if the ADMX ingestion policy is successful:</p><ul><li>Go to Intune Portal → Devices → Configuration Profiles</li><li>Find the profile containing the ADMX ingestion policy</li><li>Verify status is &quot;Succeeded&quot; (not &quot;Error&quot;)</li></ul><p>If it shows &quot;Error&quot;:</p><ol><li>Re-upload the ADMX file content</li><li>Ensure the entire file is copied (including XML header)</li><li>Verify no special characters were corrupted during copy-paste</li></ol><h4 id="step-2-check-data-types" tabindex="-1">Step 2: Check Data Types <a class="header-anchor" href="#step-2-check-data-types" aria-label="Permalink to &quot;Step 2: Check Data Types&quot;">​</a></h4><p>For each policy showing error -2016281112:</p><ol><li>Open the policy configuration in Intune</li><li>Verify <strong>Data Type</strong> is set to <strong>&quot;String&quot;</strong> (NOT &quot;Integer&quot; or &quot;Boolean&quot;)</li><li>If wrong, delete and recreate the policy with correct Data Type</li></ol><h4 id="step-3-validate-oma-uri-paths" tabindex="-1">Step 3: Validate OMA-URI Paths <a class="header-anchor" href="#step-3-validate-oma-uri-paths" aria-label="Permalink to &quot;Step 3: Validate OMA-URI Paths&quot;">​</a></h4><p>Compare your OMA-URI paths with the reference table:</p><table tabindex="0"><thead><tr><th>Policy</th><th>Correct OMA-URI</th></tr></thead><tbody><tr><td>Debug Mode</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced/DebugMode_Enf</code></td></tr><tr><td>Update Channel</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~Updates_Enf/UpdateChannel_Enf</code></td></tr><tr><td>Company Name</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~General_Enf/CompanyName_Enf</code></td></tr><tr><td>Enable Winget</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~General_Enf/EnableWinget_Enf</code></td></tr><tr><td>Graph Tenant ID</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~Intune_Enf/GraphTenantId_Enf</code></td></tr><tr><td>Graph Client ID</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~Intune_Enf/GraphClientId_Enf</code></td></tr><tr><td>Graph Client Secret</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~Intune_Enf/GraphClientSecret_Enf</code></td></tr><tr><td>Intune Test Groups</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~Intune_Enf/IntuneTestGroups_Enf</code></td></tr><tr><td>Sign Scripts</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~Security_Enf/SignScripts_Enf</code></td></tr><tr><td>AI Provider</td><td><code>./User/Vendor/MSFT/Policy/Config/switchcraft~Policy~FaserF~SwitchCraft~Enforced~AI_Enf/AIProvider_Enf</code></td></tr></tbody></table><p><strong>Important Notes:</strong></p><ul><li>Use <code>~</code> (tilde) to separate namespace parts, NOT <code>/</code> (slash)</li><li>Category names end with <code>_Enf</code> (e.g., <code>General_Enf</code>, <code>Intune_Enf</code>)</li><li>Policy names end with <code>_Enf</code> (e.g., <code>DebugMode_Enf</code>, <code>CompanyName_Enf</code>)</li></ul><h4 id="step-4-validate-xml-values" tabindex="-1">Step 4: Validate XML Values <a class="header-anchor" href="#step-4-validate-xml-values" aria-label="Permalink to &quot;Step 4: Validate XML Values&quot;">​</a></h4><p>Verify the XML structure matches the expected format:</p><p><strong>For Boolean Policies (Enable/Disable):</strong></p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><p>or</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><p><strong>For Policies with Data:</strong></p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CompanyNameBox&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Your Company Name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><p><strong>Element IDs must match the ADMX file:</strong></p><ul><li><code>CompanyNameBox</code> (not <code>CompanyName</code> or <code>CompanyName_Enf</code>)</li><li><code>GraphTenantIdBox</code> (not <code>GraphTenantId</code> or <code>TenantId</code>)</li><li><code>UpdateChannelDropdown</code> (not <code>UpdateChannel</code> or <code>Channel</code>)</li><li><code>LanguageDropdown</code> (not <code>Language</code> or <code>Lang</code>)</li></ul><h4 id="step-5-test-on-device" tabindex="-1">Step 5: Test on Device <a class="header-anchor" href="#step-5-test-on-device" aria-label="Permalink to &quot;Step 5: Test on Device&quot;">​</a></h4><ol><li><p><strong>Sync Policy</strong>: On the target device, run:</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpupdate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">force</span></span></code></pre></div><p>Or trigger a sync from Intune Portal → Devices → [Device] → Sync</p></li><li><p><strong>Check Registry</strong>: Verify the policy was applied:</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Get-ItemProperty</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Path </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HKCU:\\Software\\Policies\\FaserF\\SwitchCraft&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ErrorAction SilentlyContinue</span></span></code></pre></div></li><li><p><strong>Check Event Logs</strong>: Look for Group Policy errors:</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Get-WinEvent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LogName </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Microsoft-Windows-User Device Registration/Admin&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Where-Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.LevelDisplayName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-eq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><h3 id="quick-fix-checklist" tabindex="-1">Quick Fix Checklist <a class="header-anchor" href="#quick-fix-checklist" aria-label="Permalink to &quot;Quick Fix Checklist&quot;">​</a></h3><ul><li>[ ] ADMX ingestion policy shows &quot;Succeeded&quot;</li><li>[ ] All policy Data Types are set to &quot;String&quot;</li><li>[ ] OMA-URI paths match documentation exactly (including tildes)</li><li>[ ] XML values use correct format (<code>&lt;enabled/&gt;</code> or <code>&lt;enabled/&gt;&lt;data id=&quot;...&quot; value=&quot;...&quot;/&gt;</code>)</li><li>[ ] Element IDs match ADMX file (e.g., <code>CompanyNameBox</code>, not <code>CompanyName</code>)</li><li>[ ] Device has synced policies (<code>gpupdate /force</code>)</li><li>[ ] Registry key exists: <code>HKCU\\Software\\Policies\\FaserF\\SwitchCraft</code></li></ul><h3 id="still-not-working" tabindex="-1">Still Not Working? <a class="header-anchor" href="#still-not-working" aria-label="Permalink to &quot;Still Not Working?&quot;">​</a></h3><p>If policies still fail after following all steps:</p><ol><li><strong>Delete and Recreate</strong>: Remove all failing policies and recreate them from scratch</li><li><strong>Re-upload ADMX</strong>: Delete and recreate the ADMX ingestion policy</li><li><strong>Check Intune Logs</strong>: Review device compliance logs in Intune Portal</li><li><strong>Test with Single Policy</strong>: Create a test profile with only one policy to isolate the issue</li><li><strong>Verify Windows Version</strong>: Ensure target devices are Windows 10 1809+ or Windows 11</li></ol><h3 id="additional-resources" tabindex="-1">Additional Resources <a class="header-anchor" href="#additional-resources" aria-label="Permalink to &quot;Additional Resources&quot;">​</a></h3><ul><li><a href="./Intune_Configuration_Guide">Intune Configuration Guide</a></li><li><a href="./PolicyDefinitions/README">Policy Definitions README</a></li><li><a href="https://learn.microsoft.com/en-us/mem/intune/configuration/administrative-templates-windows" target="_blank" rel="noreferrer">Microsoft Docs: ADMX Ingestion</a></li></ul>`,39)])])}const g=t(s,[["render",l]]);export{u as __pageData,g as default};
