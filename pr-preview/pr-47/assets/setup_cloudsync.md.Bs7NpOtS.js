import{_ as t,c as i,o,ag as a}from"./chunks/framework.BCYM_D_J.js";const d=JSON.parse('{"title":"SwitchCraft CloudSync & Backup Setup","description":"","frontmatter":{},"headers":[],"relativePath":"setup_cloudsync.md","filePath":"setup_cloudsync.md","lastUpdated":1768803379000}'),s={name:"setup_cloudsync.md"};function r(n,e,l,c,u,h){return o(),i("div",null,[...e[0]||(e[0]=[a(`<h1 id="switchcraft-cloudsync-backup-setup" tabindex="-1">SwitchCraft CloudSync &amp; Backup Setup <a class="header-anchor" href="#switchcraft-cloudsync-backup-setup" aria-label="Permalink to &quot;SwitchCraft CloudSync &amp; Backup Setup&quot;">​</a></h1><p>This guide explains how to set up and use the CloudSync feature (GitHub Authentication) and the Local Backup system in SwitchCraft.</p><h2 id="_1-cloudsync-github-integration" tabindex="-1">1. CloudSync (GitHub Integration) <a class="header-anchor" href="#_1-cloudsync-github-integration" aria-label="Permalink to &quot;1. CloudSync (GitHub Integration)&quot;">​</a></h2><p>SwitchCraft allows you to sync your settings across devices using your GitHub account (via Gists).</p><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h3><ul><li>A GitHub Account.</li><li>SwitchCraft requires a Client ID to authenticate. Ideally, use the official one provided.</li></ul><h3 id="authentication-flow-device-flow" tabindex="-1">Authentication Flow (Device Flow) <a class="header-anchor" href="#authentication-flow-device-flow" aria-label="Permalink to &quot;Authentication Flow (Device Flow)&quot;">​</a></h3><ol><li><strong>Initiate Login</strong>: The application will request a &quot;Device Code&quot; from GitHub.</li><li><strong>User Authorization</strong>: <ul><li>The app will display a <strong>User Code</strong> (e.g., <code>ABCD-1234</code>) and a URL (<code>https://github.com/login/device</code>).</li><li>Open the URL in your browser.</li><li>Enter the code and authorize the &quot;SwitchCraft&quot; application.</li></ul></li><li><strong>Completion</strong>: Once authorized, SwitchCraft automatically receives an access token and securely stores it in your system keyring.</li></ol><h3 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><ul><li><strong>Sync Up</strong>: Uploads your current local settings to a private GitHub Gist named <code>switchcraft_settings.json</code>. <ul><li><em>Note:</em> If the Gist does not exist, it will be created automatically.</li></ul></li><li><strong>Sync Down</strong>: Downloads settings from the Gist and applies them to your current machine.</li></ul><h3 id="security" tabindex="-1">Security <a class="header-anchor" href="#security" aria-label="Permalink to &quot;Security&quot;">​</a></h3><ul><li>Tokens are stored securely using the OS&#39;s Credential Manager/Keyring.</li><li>The Gist created is <strong>Secret</strong> (Private), meaning it&#39;s not listed in search engines, but anyone with the link (or your token) can access it.</li></ul><hr><h2 id="_2-local-backup-import-export" tabindex="-1">2. Local Backup (Import / Export) <a class="header-anchor" href="#_2-local-backup-import-export" aria-label="Permalink to &quot;2. Local Backup (Import / Export)&quot;">​</a></h2><p>You can also manually back up your settings to a local JSON file.</p><h3 id="export-settings" tabindex="-1">Export Settings <a class="header-anchor" href="#export-settings" aria-label="Permalink to &quot;Export Settings&quot;">​</a></h3><ul><li>Use this feature to save your current configuration to a file (e.g., <code>switchcraft_backup.json</code>).</li><li>Useful for archiving or manually transferring settings to air-gapped machines.</li></ul><h3 id="import-settings" tabindex="-1">Import Settings <a class="header-anchor" href="#import-settings" aria-label="Permalink to &quot;Import Settings&quot;">​</a></h3><ul><li>Load a previously saved JSON file to restore your configuration.</li><li><strong>Warning</strong>: This will overwrite your current settings with the values from the file.</li></ul><hr><h2 id="developer-devops-notes" tabindex="-1">Developer / DevOps Notes <a class="header-anchor" href="#developer-devops-notes" aria-label="Permalink to &quot;Developer / DevOps Notes&quot;">​</a></h2><h3 id="configuration-keys" tabindex="-1">Configuration Keys <a class="header-anchor" href="#configuration-keys" aria-label="Permalink to &quot;Configuration Keys&quot;">​</a></h3><ul><li><strong>Registry Path</strong>: <code>HKCU\\Software\\FaserF\\SwitchCraft</code></li><li><strong>Token Storage</strong>: <code>SwitchCraft_GitHub_Token</code> in System Keyring.</li></ul><h3 id="integration-in-code" tabindex="-1">Integration in Code <a class="header-anchor" href="#integration-in-code" aria-label="Permalink to &quot;Integration in Code&quot;">​</a></h3><ul><li><strong>AuthService</strong>: Handles the OAuth Device Flow.</li><li><strong>SyncService</strong>: Manages Gist CRUD operations.</li><li><strong>BackupService</strong>: Manages local JSON file I/O.</li></ul><hr><h2 id="_3-administrator-developer-setup" tabindex="-1">3. Administrator / Developer Setup <a class="header-anchor" href="#_3-administrator-developer-setup" aria-label="Permalink to &quot;3. Administrator / Developer Setup&quot;">​</a></h2><p>If you are a developer or administrator deploying this feature, you must create a GitHub OAuth App to obtain a <strong>Client ID</strong>.</p><h3 id="step-1-create-a-github-oauth-app" tabindex="-1">Step 1: Create a GitHub OAuth App <a class="header-anchor" href="#step-1-create-a-github-oauth-app" aria-label="Permalink to &quot;Step 1: Create a GitHub OAuth App&quot;">​</a></h3><ol><li>Go to <strong>GitHub Settings</strong> -&gt; <a href="https://github.com/settings/apps" target="_blank" rel="noreferrer"><strong>Developer settings</strong></a>.</li><li>Select <strong>OAuth Apps</strong> -&gt; <strong>New OAuth App</strong>.</li><li>Fill in the details: <ul><li><strong>Application Name</strong>: &quot;SwitchCraft&quot; (or your custom name).</li><li><strong>Homepage URL</strong>: Your repository URL or website (e.g., <code>https://github.com/your-org/switchcraft</code>).</li><li><strong>Authorization callback URL</strong>: This is <strong>not used</strong> for the Device Flow, but required by the form. You can use valid URL like <code>http://localhost:8000/callback</code> or your homepage.</li></ul></li><li>Click <strong>Register application</strong>.</li></ol><h3 id="step-2-enable-device-flow" tabindex="-1">Step 2: Enable Device Flow <a class="header-anchor" href="#step-2-enable-device-flow" aria-label="Permalink to &quot;Step 2: Enable Device Flow&quot;">​</a></h3><ol><li>Once created, check if there is an option to <strong>&quot;Enable Device Flow&quot;</strong>. <ul><li><em>Note:</em> For standard &quot;OAuth Apps&quot;, Device Flow is typically enabled by default. If you created a &quot;GitHub App&quot; (different from &quot;OAuth App&quot;), you must explicitly check &quot;Expire user authorization tokens&quot; and ensure Device Flow usage is allowed.</li><li>We recommend using a standard <strong>&quot;OAuth App&quot;</strong> for this use case.</li></ul></li></ol><h3 id="step-3-copy-client-id" tabindex="-1">Step 3: Copy Client ID <a class="header-anchor" href="#step-3-copy-client-id" aria-label="Permalink to &quot;Step 3: Copy Client ID&quot;">​</a></h3><ol><li>On the App&#39;s settings page, copy the <strong>Client ID</strong> (e.g., <code>Iv1.xxxxxxxxxxxx</code>).</li><li><strong>IMPORTANT</strong>: You do <strong>NOT</strong> need the <strong>Client Secret</strong> for the Device Flow in a public client (native app). The Device Flow is specifically designed to allow users to authenticate without the application needing to hold a secret credential.</li></ol><h3 id="step-4-configure-code" tabindex="-1">Step 4: Configure Code <a class="header-anchor" href="#step-4-configure-code" aria-label="Permalink to &quot;Step 4: Configure Code&quot;">​</a></h3><ol><li>Open <code>src/switchcraft/services/auth_service.py</code>.</li><li>Locate the <code>CLIENT_ID</code> variable in the <code>AuthService</code> class:<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Replace with your actual GitHub App Client ID</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;YOUR_CLIENT_ID_HERE&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre></div></li><li>Replace the placeholder with your <strong>Client ID</strong>.</li></ol><h3 id="required-permissions-scopes" tabindex="-1">Required Permissions (Scopes) <a class="header-anchor" href="#required-permissions-scopes" aria-label="Permalink to &quot;Required Permissions (Scopes)&quot;">​</a></h3><p>The application requires the following scopes (already configured in code):</p><ul><li><strong><code>gist</code></strong>: <ul><li><strong>Read/Write access to Gists</strong>.</li><li>Required to create (<code>switchcraft_settings.json</code>) and update it with user settings.</li></ul></li><li><strong><code>read:user</code></strong>: <ul><li><strong>Read-only access to user profile</strong>.</li><li>Required to verify identity (get username/avatar) during login.</li></ul></li></ul><hr><h2 id="_4-security-note-client-secrets" tabindex="-1">4. Security Note (Client Secrets) <a class="header-anchor" href="#_4-security-note-client-secrets" aria-label="Permalink to &quot;4. Security Note (Client Secrets)&quot;">​</a></h2><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p><strong>NEVER include a Client Secret in a public repository or compiled application.</strong></p></div><p>SwitchCraft uses the <strong>OAuth 2.0 Device Authorization Grant</strong> (RFC 8628). This flow is designed for public clients (like CLIs and Desktop Apps) that cannot securely store secrets.</p><ul><li><strong>Client ID</strong>: It is <strong>SAFE</strong> to be public. It merely identifies the &quot;SwitchCraft&quot; application to GitHub. It does not grant any access by itself.</li><li><strong>Client Secret</strong>: It is <strong>NOT USED</strong> in this implementation. Do <strong>NOT</strong> generate one, and if you have one, do <strong>NOT</strong> put it in the code.</li></ul><p>The security comes from the fact that the user must manually approve the login in their browser, effectively &quot;granting&quot; the token to the application identified by the Client ID.</p>`,45)])])}const g=t(s,[["render",r]]);export{d as __pageData,g as default};
