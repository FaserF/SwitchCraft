import{_ as t,o as s,c as a,ag as i}from"./chunks/framework.2ZBY5Ac0.js";const p=JSON.parse('{"title":"SwitchCraft Versioning System","description":"","frontmatter":{},"headers":[],"relativePath":"versioning.md","filePath":"versioning.md","lastUpdated":1771361433000}'),o={name:"versioning.md"};function l(r,e,n,d,c,h){return s(),a("div",null,[...e[0]||(e[0]=[i('<h1 id="switchcraft-versioning-system" tabindex="-1">SwitchCraft Versioning System <a class="header-anchor" href="#switchcraft-versioning-system" aria-label="Permalink to &quot;SwitchCraft Versioning System&quot;">​</a></h1><p>SwitchCraft follows a strict versioning schema to ensure compatibility, easy identification of release types, and proper upgrade paths. This document describes how version numbers are generated, how CI handles them, and how they map to different artifacts.</p><h2 id="version-number-logic" tabindex="-1">Version Number Logic <a class="header-anchor" href="#version-number-logic" aria-label="Permalink to &quot;Version Number Logic&quot;">​</a></h2><h3 id="base-format" tabindex="-1">Base Format <a class="header-anchor" href="#base-format" aria-label="Permalink to &quot;Base Format&quot;">​</a></h3><p>The core version number follows a calendar-based schema:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Year.Month.Release</span></span></code></pre></div><ul><li><strong>Year</strong>: The current year (e.g., <code>2026</code>).</li><li><strong>Month</strong>: The current month (e.g., <code>1</code> for January).</li><li><strong>Release</strong>: An incrementing number for releases within that month (e.g., <code>5</code>).</li></ul><p>Example: <code>2026.1.5</code></p><h3 id="release-types-suffixes" tabindex="-1">Release Types (Suffixes) <a class="header-anchor" href="#release-types-suffixes" aria-label="Permalink to &quot;Release Types (Suffixes)&quot;">​</a></h3><p>Depending on the build type (Stable, Beta, Development), suffixes are appended to the base version:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Release Type</th><th style="text-align:left;">Suffix Example</th><th style="text-align:left;">Full Version Example</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Stable</strong></td><td style="text-align:left;"><em>(None)</em></td><td style="text-align:left;"><code>2026.1.5</code></td><td style="text-align:left;">Production-ready official release.</td></tr><tr><td style="text-align:left;"><strong>Beta</strong></td><td style="text-align:left;"><code>b{N}</code></td><td style="text-align:left;"><code>2026.1.5b1</code></td><td style="text-align:left;">Public test build. Stable enough for testing.</td></tr><tr><td style="text-align:left;"><strong>Development</strong></td><td style="text-align:left;"><code>.dev0+{hash}</code></td><td style="text-align:left;"><code>2026.1.5.dev0+3c4f9a</code></td><td style="text-align:left;">CI/Nightly build. Contains latest commit hash.</td></tr></tbody></table><hr><h2 id="windows-installer-versioning" tabindex="-1">Windows Installer Versioning <a class="header-anchor" href="#windows-installer-versioning" aria-label="Permalink to &quot;Windows Installer Versioning&quot;">​</a></h2><p>Windows executables and installers (<code>.exe</code>, <code>.msi</code>) require a strict 4-part numeric version format (<code>A.B.C.D</code>) in their file resources (<code>VS_VERSION_INFO</code>).</p><p>SwitchCraft maps the semantic version to this 4-part numeric format as follows:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Year.Month.Release.BuildNumber</span></span></code></pre></div><ul><li><strong>Year.Month.Release</strong>: Taken directly from the base version.</li><li><strong>BuildNumber</strong>: Derived from the <strong>GitHub Actions Run Number</strong> (CI) or a local counter.</li></ul><h3 id="why-this-matters" tabindex="-1">Why this matters? <a class="header-anchor" href="#why-this-matters" aria-label="Permalink to &quot;Why this matters?&quot;">​</a></h3><p>Windows uses this 4-part version to decide if an installer is an &quot;Upgrade&quot;.</p><ul><li><code>2026.1.5.105</code> &gt; <code>2026.1.5.100</code> -&gt; Windows considers this a new version.</li><li>Stable releases usually have <code>0</code> as the build number base, while Dev builds use the Run Number to ensure every CI build is &quot;newer&quot; than the previous one for testing, but &quot;older&quot; than the next Stable release if semver rules apply (though in Windows, <code>.100</code> is &gt; <code>.0</code>, so Dev builds might appear &quot;newer&quot; than the <em>same</em> stable version. We handle this by bumping the <code>Release</code> number for Stable).</li></ul><h3 id="local-builds" tabindex="-1">Local Builds <a class="header-anchor" href="#local-builds" aria-label="Permalink to &quot;Local Builds&quot;">​</a></h3><p>When building locally (using <code>scripts/build_release.ps1</code>), you can specify a custom build number to test upgrades:</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.\\scripts\\build_release.ps1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Modern </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BuildNumber </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">999</span></span></code></pre></div><p>This generates <code>2026.1.5.999</code>.</p><hr><h2 id="ci-cd-workflow" tabindex="-1">CI/CD Workflow <a class="header-anchor" href="#ci-cd-workflow" aria-label="Permalink to &quot;CI/CD Workflow&quot;">​</a></h2><p>The release process is automated via GitHub Actions (<code>.github/workflows/release.yml</code>).</p><ol><li><strong>Trigger</strong>: Access via &quot;Run workflow&quot; button.</li><li><strong>Input</strong>: Select type (<code>stable</code>, <code>beta</code>, <code>dev</code>).</li><li><strong>Generation</strong>: <ul><li>The script <code>.github/scripts/generate_release_version.py</code> reads <code>pyproject.toml</code>.</li><li>It calculates the Next Version based on the selected type.</li><li>It writes the version back to <code>pyproject.toml</code> and generates a <code>file_version_info.txt</code>.</li></ul></li><li><strong>Build</strong>: <ul><li>PyInstaller builds the app using the generated version info.</li><li>Inno Setup compiles the installer, receiving the version string and numeric components.</li></ul></li><li><strong>Artifacts</strong>: <ul><li><strong>Stable</strong>: Uploaded to GitHub Releases.</li><li><strong>Dev/Beta</strong>: Uploaded as Pre-release or Artifacts.</li></ul></li></ol><hr><h2 id="docker-container-tags" tabindex="-1">Docker Container Tags <a class="header-anchor" href="#docker-container-tags" aria-label="Permalink to &quot;Docker Container Tags&quot;">​</a></h2><p>For the SwitchCraft Web/Server backend, Docker tags mimic the release version but replace <code>+</code> with <code>-</code> (as <code>+</code> is invalid in Docker tags).</p><ul><li><strong>Stable</strong>: <code>faserf/switchcraft:2026.1.5</code>, <code>faserf/switchcraft:latest</code></li><li><strong>Beta</strong>: <code>faserf/switchcraft:2026.1.5b1</code></li><li><strong>Dev</strong>: <code>faserf/switchcraft:2026.1.5-dev0-3c4f9a</code>, <code>faserf/switchcraft:dev</code></li></ul><p>This ensures that <code>latest</code> always points to the last Stable release, while <code>dev</code> points to the latest CI build.</p>',33)])])}const g=t(o,[["render",l]]);export{p as __pageData,g as default};
