import{_ as t,o as e,c as i,ag as a}from"./chunks/framework.2ZBY5Ac0.js";const u=JSON.parse('{"title":"SwitchCraft Server (Docker) Guide","description":"","frontmatter":{},"headers":[],"relativePath":"docker_setup.md","filePath":"docker_setup.md","lastUpdated":1770897270000}'),n={name:"docker_setup.md"};function r(l,s,o,h,d,c){return e(),i("div",null,[...s[0]||(s[0]=[a(`<h1 id="switchcraft-server-docker-guide" tabindex="-1">SwitchCraft Server (Docker) Guide <a class="header-anchor" href="#switchcraft-server-docker-guide" aria-label="Permalink to &quot;SwitchCraft Server (Docker) Guide&quot;">‚Äã</a></h1><p>SwitchCraft enables you to host your own instance of the application using <strong>Docker</strong>. The containerized version allows you to access SwitchCraft from any browser in your network, complete with a built-in authentication system, Single Sign-On (SSO), and administrative controls.</p><h2 id="üöÄ-quick-start" tabindex="-1">üöÄ Quick Start <a class="header-anchor" href="#üöÄ-quick-start" aria-label="Permalink to &quot;üöÄ Quick Start&quot;">‚Äã</a></h2><h3 id="_1-build-run" tabindex="-1">1. Build &amp; Run <a class="header-anchor" href="#_1-build-run" aria-label="Permalink to &quot;1. Build &amp; Run&quot;">‚Äã</a></h3><p>You can build the image directly from the source:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build the image</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switchcraft-web</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run the container (Mapping port 8080)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># We map a volume to persist configuration AND user database</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8080:8080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switchcraft_data:/root/.switchcraft</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switchcraft</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  switchcraft-web</span></span></code></pre></div><p>Access the application at: <code>http://localhost:8080</code></p><h2 id="üîê-authentication-user-management" tabindex="-1">üîê Authentication &amp; User Management <a class="header-anchor" href="#üîê-authentication-user-management" aria-label="Permalink to &quot;üîê Authentication &amp; User Management&quot;">‚Äã</a></h2><p>The Docker container includes a full <strong>User Management System</strong>.</p><h3 id="default-login" tabindex="-1">Default Login <a class="header-anchor" href="#default-login" aria-label="Permalink to &quot;Default Login&quot;">‚Äã</a></h3><ul><li><strong>Username:</strong> <code>admin</code></li><li><strong>Password:</strong> <code>admin</code> (You should change this immediately in the Admin Panel)</li></ul><h3 id="multi-user-support" tabindex="-1">Multi-User Support <a class="header-anchor" href="#multi-user-support" aria-label="Permalink to &quot;Multi-User Support&quot;">‚Äã</a></h3><p>The server supports multiple users with distinct roles (<code>admin</code> or <code>user</code>).</p><ul><li><strong>Admins</strong> have access to the <code>/admin</code> dashboard to manage users and server settings.</li><li><strong>Users</strong> can access the application tools but cannot modify server settings or other users.</li></ul><h3 id="single-sign-on-sso-setup" tabindex="-1">Single Sign-On (SSO) Setup <a class="header-anchor" href="#single-sign-on-sso-setup" aria-label="Permalink to &quot;Single Sign-On (SSO) Setup&quot;">‚Äã</a></h3><p>SwitchCraft supports OAuth2 login via <strong>GitHub</strong> and <strong>Microsoft Entra ID (Office 365)</strong>. To enable SSO, you must provide the following environment variables when running the Docker container.</p><h4 id="_1-microsoft-entra-id-o365" tabindex="-1">1. Microsoft Entra ID (O365) <a class="header-anchor" href="#_1-microsoft-entra-id-o365" aria-label="Permalink to &quot;1. Microsoft Entra ID (O365)&quot;">‚Äã</a></h4><p>Register an App in Azure AD -&gt; App Registrations.</p><ul><li><strong>Redirect URI:</strong> <code>http://&lt;your-domain&gt;:8080/oauth_callback/entra</code></li><li><strong>API Permissions:</strong> <code>User.Read</code> (Delegated)</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SC_ENTRA_CLIENT_ID=&quot;&lt;your-client-id&gt;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SC_ENTRA_TENANT_ID=&quot;&lt;your-tenant-id&gt;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SC_ENTRA_CLIENT_SECRET=&quot;&lt;your-client-secret&gt;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SC_BASE_URL=&quot;http://myserver.com:8080&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  switchcraft-web</span></span></code></pre></div><p><em>Users logging in via Entra for the first time will be <strong>automatically created</strong> as normal users.</em></p><h4 id="_2-github" tabindex="-1">2. GitHub <a class="header-anchor" href="#_2-github" aria-label="Permalink to &quot;2. GitHub&quot;">‚Äã</a></h4><p>Register an OAuth App in GitHub Developer Settings.</p><ul><li><strong>Callback URL:</strong> <code>http://&lt;your-domain&gt;:8080/oauth_callback/github</code></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SC_GITHUB_CLIENT_ID=&quot;&lt;your-client-id&gt;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SC_GITHUB_CLIENT_SECRET=&quot;&lt;your-client-secret&gt;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  switchcraft-web</span></span></code></pre></div><h2 id="‚öôÔ∏è-administration-dashboard" tabindex="-1">‚öôÔ∏è Administration Dashboard <a class="header-anchor" href="#‚öôÔ∏è-administration-dashboard" aria-label="Permalink to &quot;‚öôÔ∏è Administration Dashboard&quot;">‚Äã</a></h2><p>Access the dashboard at <code>http://localhost:8080/admin</code> (Link in Footer).</p><h3 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">‚Äã</a></h3><ol><li><strong>User Management</strong>: <ul><li><strong>List Users:</strong> See all registered accounts (Local and SSO).</li><li><strong>Add User:</strong> Manually create accounts with passwords.</li><li><strong>Delete User:</strong> Remove accounts (except the root admin).</li></ul></li><li><strong>Server Settings</strong>: <ul><li><strong>Demo Mode:</strong> Switch app to Read-Only mode.</li><li><strong>Disable Auth:</strong> Allow public access without login (Auto-Login as Guest/Admin).</li></ul></li><li><strong>Security</strong>: <ul><li><strong>Change Password:</strong> Update your own password.</li><li><strong>MFA / 2FA:</strong> Setup Time-based OTP (Google Authenticator) enforcement.</li></ul></li></ol><h2 id="üíæ-persistence" tabindex="-1">üíæ Persistence <a class="header-anchor" href="#üíæ-persistence" aria-label="Permalink to &quot;üíæ Persistence&quot;">‚Äã</a></h2><p>To keep your users and settings safe, mount the <code>/root/.switchcraft</code> volume.</p><table tabindex="0"><thead><tr><th style="text-align:left;">Path</th><th style="text-align:left;">Purpose</th></tr></thead><tbody><tr><td style="text-align:left;"><code>server/auth_config.json</code></td><td style="text-align:left;">Stores Global Server Config (Secret Keys, Demo Mode).</td></tr><tr><td style="text-align:left;"><code>server/users.json</code></td><td style="text-align:left;"><strong>User Database</strong> (Usernames, Password Hashes, Roles).</td></tr><tr><td style="text-align:left;"><code>users/&lt;username&gt;/config.json</code></td><td style="text-align:left;">(Future) Server-side user profiles.</td></tr></tbody></table><h2 id="üåê-web-architecture-notes" tabindex="-1">üåê Web Architecture Notes <a class="header-anchor" href="#üåê-web-architecture-notes" aria-label="Permalink to &quot;üåê Web Architecture Notes&quot;">‚Äã</a></h2><ul><li><strong>Session Storage:</strong> Login sessions use secure, encrypted cookies valid for 24 hours.</li><li><strong>Client Settings:</strong> Currently, app preferences (Theme, etc.) are stored in the <strong>Browser</strong> (LocalStorage) to ensure fast load times. We are working on server-side roaming profiles for the next release.</li><li><strong>File Access:</strong> The web version runs in a sandbox. You cannot access the host filesystem directly. Use the Upload/Download features.</li></ul><h2 id="üõ†-troubleshooting" tabindex="-1">üõ† Troubleshooting <a class="header-anchor" href="#üõ†-troubleshooting" aria-label="Permalink to &quot;üõ† Troubleshooting&quot;">‚Äã</a></h2><ul><li><strong>SSO Redirect Error?</strong> Ensure <code>SC_BASE_URL</code> matches exactly the URL you access in the browser (including http/https and port).</li><li><strong>Locked Out?</strong></li><li><code>docker exec -it switchcraft sh</code></li><li>Delete <code>server/users.json</code> to reset the database (recreating default admin).</li><li>Or manually edit <code>server/users.json</code> if you know JSON syntax.</li></ul>`,36)])])}const g=t(n,[["render",r]]);export{u as __pageData,g as default};
